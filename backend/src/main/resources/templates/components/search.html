<div xmlns:th="http://www.thymeleaf.org" th:fragment="search">
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .search-button {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      border: none;
      background: rgb(0, 28, 119);
      color: white;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      z-index: 100;
      transition: background-color 0.2s;
    }

    .search-button:hover {
      background-color: #444;
    }

    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      z-index: 200;
      justify-content: center;
      align-items: center;
    }

    .overlay.active {
      display: flex;
    }

    .popup-panel {
      background-color: white;
      border-radius: 10px;
      padding: 30px;
      width: 500px;
      max-width: 90%;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }

      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    .search-input {
      width: 100%;
      padding: 10px;
      border-radius: 20px;
      border: 1px solid #ccc;
      margin-bottom: 20px;
    }

    .button-grid {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .filter-column {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .filter-button,
    .submit {
      padding: 8px 16px;
      background-color: #dcdcdc;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: background-color 0.2s;
    }

    .filter-button:hover {
      background-color: #bcbcbc;
    }

    .submit {
      background-color: #66ACE6;
      color: white;
    }

    .close-button {
      margin-top: 20px;
      background-color: #e06666;
      color: white;
    }
  </style>

  <!-- Tombol Search -->
  <button class="search-button" id="openSearch" title="Cari">&#128269;</button>

  <!-- Overlay dan Popup -->
  <div class="overlay" id="searchOverlay">
    <div class="popup-panel">
      <form th:action="@{/search/result}" method="get">
        <input type="text" class="search-input" name="query" placeholder="Masukkan nama barang" th:value="${param.query}" />

        <div class="button-grid">
          <div class="filter-column">
            <button class="filter-button" type="submit" name="sort" value="az">Huruf A-Z</button>
            <button class="filter-button" type="submit" name="sort" value="za">Huruf Z-A</button>
            <button class="filter-button" type="submit" name="sort" value="expensive">Harga Mahal</button>
            <button class="filter-button" type="submit" name="sort" value="cheap">Harga Murah</button>
            <button class="filter-button" type="submit" name="filter" value="bentuk">Bentuk</button>
          </div>
          <div class="filter-column">
            <button class="filter-button" type="submit" name="filter" value="ukuran">Ukuran</button>
            <button class="filter-button" type="submit" name="filter" value="ketebalan">Ketebalan</button>
            <button class="filter-button" type="submit" name="filter" value="material">Material</button>
            <button class="filter-button" type="submit" name="filter" value="brand">Brand</button>
          </div>
        </div>

        <button type="submit" class="submit">Cari</button>
      </form>

      <button type="button" class="filter-button close-button" id="closeOverlayBtn">Tutup</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const searchButton = document.getElementById('openSearch');
      const overlay = document.getElementById('searchOverlay');
      const closeBtn = document.getElementById('closeOverlayBtn');

      searchButton.addEventListener('click', function () {
        overlay.classList.add('active');
      });

      overlay.addEventListener('click', function (e) {
        if (e.target === overlay) {
          overlay.classList.remove('active');
        }
      });

      closeBtn.addEventListener('click', function () {
        overlay.classList.remove('active');
      });
    });
  </script>
</div>
